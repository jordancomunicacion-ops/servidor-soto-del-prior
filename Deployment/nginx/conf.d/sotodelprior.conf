server {
    listen 80;
    server_name sotodelprior.com;

    # Redirect generic traffic to Next.js App
    # Assuming Next.js runs on the host or another container named 'next_app'
    # Since we are inside Docker, 'localhost' refers to the container.
    # We will need the actual internal IP or service name.
    
    location / {
        proxy_pass http://host.docker.internal:3000; # For local testing on Windows with Docker Desktop
        # proxy_pass http://next_app:3000; # Use this in production with named service
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
